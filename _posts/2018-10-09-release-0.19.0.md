---
layout: post
title: Release 0.19.0
---

A new version of MDAnalysis has been released!
This version brings a multitude of new features
including exciting additions from our two [2019 Google Summer of Code][] students
and one [NSF REU][] student.
Some highlights are given below, whilst
the [release notes][] list all the changes in this version.

## Capped Distance Searches

GSoC student, Ayush Suhane (@ayushsuhane), worked on integrating faster distance search algorithms
(such as the grid search in the new [`MDAnalysis.lib.nsgrid`](https://www.mdanalysis.org/docs/documentation_pages/lib/nsgrid.html) neighbor search library and [periodic KDTrees][]) for limited distance searches.
This resulted in two new functions 
[`MDAnalysis.lib.distances.capped_distance`](https://www.mdanalysis.org/docs/documentation_pages/lib/distances.html#MDAnalysis.lib.distances.capped_distance) and
[`MDAnalysis.lib.distances.self_capped_distance`](https://www.mdanalysis.org/docs/documentation_pages/lib/distances.html#MDAnalysis.lib.distances.self_capped_distance), 
which find all pairwise distances between particles up to a given maximum distance.
By specifying a maximum distance to the search, it is possible to optimise the search,
leading to greatly improved performance especially in larger systems.

For example to find all contacts between oxygen and hydrogen up to 5.0 Ã…
```python
from MDAnalysisTests.datafiles import PSF, DCD
import MDAnalysis as mda
from MDAnalysis.lib.distances import capped_distance

u = mda.Universe(PSF, DCD)

oxy = u.select_atoms('name O*')
hyd = u.select_atoms('name H*')

idx, dists = capped_distance(oxy.positions, hyd.positions, box=u.dimensions, max_cutoff=5.0)
```
Unlike [`distance_array`](https://www.mdanalysis.org/docs/documentation_pages/lib/distances.html#MDAnalysis.lib.distances.distance_array),
which returns a matrix of every pairwise distance,
here a sparse representation is returned,
where `idx` is a `(n, 2)` array of the indices of the atoms
and `dists` is the distance between these atoms.

For full details on the implementation of this and the expected performance improvements
see Ayush's post on [Improvements in distance search methods][].

## On-the-fly trajectory transformations

GSoC student David Cruz (@davidercruz) implemented *on-the-fly trajectory transformations*.
Think of it as specifying additional transformations such as centering, removing periodic-boundary
artifacts, or RMSD-fitting that are applied to a trajectory before the coordinates are passed 
to user code. Transformations can be stacked and associated with a trajectory. For example:

1. center on protein
2. make all molecules whole that were broken across the periodic boundaries
3. superimpose each frame to a reference structure by minimizing the RMSD ("RMSD fitting")

No intermediate trajectories have to be written, the transformations are simply applied to the
current in-memory coordinates. Although this approach incurs a computational overhead, it is generally
still much more efficient than writing out intermediate trajectories to disk because the cost
for I/O tends to be much larger than for the computation of the transformation.
This works particularly well for interactive analysis in a Jupyter notebook as well as 
[visualization of trajectories with nglview][].
Furthermore, one can implement custom transformations and stack them arbitrarily.

Davide wrote an in-depth post about his [On-the-fly transformations] where he shows more examples. 

## Analysis improvements

- nsf dihedral work
- density flexibility
- rdf_s

## Improvements to file readers

- lammps dump reader
- chainreader
- traj slice object
- memory reader
- hybrid36 pdb
- settle constraints
- top parser does bonds/angles/dihedrals


## Miscellaneous performance improvements

- guess_bonds (thanks to above methods)
- geometry selections faster (thanks to above)
- make_whole (cpp rewrite)
- fragment finding (cpp rewrite)
- improvements to AtomGroup internals

## Deprecations

This release brings a few new deprecations as the package heads towards a final API:

  * start/stop/step are deprecated in the initialization of Analysis classes.
    These parameters should instead be given to the run() method of the class.
  * Almost all "save()", "save_results()", "save_table()" methods in
    analysis classes.
  * Deprecated use of core.flags, the deprecation messages for this give advice
    on how to replace this functionality.

## Author statistics

Altogether this represents the work of 16 contributors from around the world,
and featured the work of 5 new contributors:
 - [Irfan Alibay][]
 - [Shujie Fan][]
 - [Andrew R. McCluskey][]
 - [Henry Mull][]
 - [Paul Smith][]


## Upgrading to MDAnalysis version 0.19

To get all these features run either `conda update -c conda-forge mdanalysis`
or `pip install --upgrade MDAnalysis`.

[2019 Google Summer of Code]: {{ site.baseurl }}{% post_url 2018-04-26-gsoc-students %}
[NSF REU]: https://becksteinlab.physics.asu.edu/positions/115/research-experience-for-undergraduates-summer-2018
[release notes]: {{ site.github.wiki }}/ReleaseNotes0190
[periodic KDTrees]: https://www.mdanalysis.org/docs/documentation_pages/lib/pkdtree.html
[Improvements in distance search methods]: {{ site.baseurl }}{% post_url 2018-08-30-gsoc18-distancesearch %}
[On-the-fly transformations]: {{ site.baseurl }}{% post_url 2018-08-30-on-the-fly-transformations %}
[visualization of trajectories with nglview]: {{ site.baseurl }}{% post_url 2016-03-14-nglview %}
[Irfan Alibar]: https://github.com/IAlibay
[Shujie Fan]: https://github.com/VOD555
[Andrew R. McCluskey]: https://github.com/arm61
[Henry Mull]: https://github.com/hfmull
[Paul Smith]: https://github.com/p-j-smith

